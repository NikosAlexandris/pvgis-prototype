# ============================================================================
# TMY Multi-Variable Attributes
# ============================================================================

- name: GlobalIrradianceSeriesAttribute
  label: Global Irradiance Series
  type: Attribute
  description: Attribute for global horizontal irradiance time series in TMY
  sections:
    global_irradiance:
      type: xarray.DataArray
      title: Global Horizontal Irradiance
      description: Global horizontal irradiance time series
      symbol: GHI
      unit: "W/m²"
      initial: null

- name: DirectNormalIrradianceSeriesAttribute
  label: Direct Normal Irradiance Series
  type: Attribute
  description: Attribute for direct normal irradiance time series in TMY
  sections:
    direct_normal_irradiance:
      type: xarray.DataArray
      title: Direct Normal Irradiance
      description: Direct normal irradiance time series
      symbol: DNI
      unit: "W/m²"
      initial: null

- name: RelativeHumiditySeriesAttribute
  label: Relative Humidity Series
  type: Attribute
  description: Attribute for relative humidity time series in TMY
  sections:
    relative_humidity:
      type: xarray.DataArray
      title: Relative Humidity
      description: Relative humidity time series
      symbol: RH
      unit: "%"
      initial: null

- name: SurfacePressureSeriesAttribute
  label: Surface Pressure Series
  type: Attribute
  description: Attribute for surface pressure time series in TMY
  sections:
    surface_pressure:
      type: xarray.DataArray
      title: Surface Pressure
      description: Surface pressure time series
      symbol: P
      unit: "Pa"
      initial: null

# ============================================================================
# TMY Complete Multi-Variable Data Model
# ============================================================================

- name: TypicalMeteorologicalYear
  label: Typical Meteorological Year
  type: Data Model
  description: Complete TMY with all meteorological variables
  symbol: TMY
  color: lightblue
  require:
    - LocationAttributes
    - TypicalMonthsAttribute
    - FinkelsteinSchaferStatisticsAttribute
    - WeightingSchemeName
    - TemperatureSeriesAttribute
    - WindSpeedSeriesAttribute
    - GlobalIrradianceSeriesAttribute
    - DirectNormalIrradianceSeriesAttribute
    - RelativeHumiditySeriesAttribute
    - SurfacePressureSeriesAttribute
  sections:
    name:
      description: Name of the complete TMY data model
      initial: "Typical Meteorological Year"
    shortname:
      description: Short name
      initial: "TMY"
    title:
      description: Title of the data model
      initial: "Typical Meteorological Year (Complete)"
    description:
      initial: "Complete Typical Meteorological Year with all meteorological variables following ISO 15927-4 standard"
    symbol:
      description: Symbol
      initial: "TMY"
    value:
      description: Combined TMY values for all variables
      dependencies: ["temperature", "wind_speed", "global_irradiance"]

# ============================================================================
# TMY Output Structure Elements
# ============================================================================


- name: TMYMultiVariableOutputStructureElement
  label: TMY Multi-Variable Output
  type: OutputStructureElement
  description: Output structure for complete TMY with all variables
  sections:
    output_structure:
      - section: Meteorological Variables
        id: TMYVariables
        description: All meteorological variable time series
        condition: verbose >= 0
        fields:
          - temperature
          - wind_speed
          - global_irradiance
          - direct_normal_irradiance
          - relative_humidity
          - surface_pressure

# ============================================================================
# TMY Output Templates
# ============================================================================

name: TypicalMeteorologicalYearOutputTemplate
label: Typical Meteorological Year Output Template
type: Template
description: Output template for a TMY
color: gray

require:
  - TMYCoreOutputStructureElement
  - TMYStatisticsOutputStructureElement
  - TMYMultiVariableOutputStructureElement

sections:

  output_structure:

    - section: Location
      id: TMYLocation
      description: Geographic location parameters
      condition: verbose >= 1
      fields:
        - longitude
        - latitude

    - section: Time Metadata
      id: TMYTime
      description: Time information for the TMY
      condition: verbose >= 2
      fields:
        - timezone
        - reference_year
