name: DirectInclinedIrradiance
label: Direct Inclined Irradiance
type: Data Model
description: Direct inclined irradiance model
symbol: ⸾ ⇣ ∡ ⎄
color: gray

require:
  - irradiance/template

  # Surface reflectivity : require generic attributes, then override (below) important fields
  - irradiance/attribute/reflectivity/loss
  - irradiance/attribute/reflectivity/percentage
  - surface/property/reflectivity_factor
  - irradiance/attribute/inclined/before_reflectivity/value

  # Surface position parameters
  - surface/position/attribute/orientation
  - surface/position/attribute/tilt

  # Solar Position parameters
  - sun/algorithms 
  - sun/position/attribute/altitude
  - sun/position/attribute/refracted_altitude
  # - solar_position/attributes/unrefracted_zenith
  - sun/position/attribute/incidence
 
  # Surface location
  - surface/position/attribute/elevation
  - surface/position/attribute/shading

  # Options
  - options/angle_output_unit

sections:

  supertitle:
    initial: Direct Inclined Irradiance

  title:
    initial: Direct Inclined Irradiance

  value:
    dependencies: direct_horizontal_irradiance

  # solar_azimuth:
  #   type: SolarAzimuth
  #   title: Azimuth 󱦥
  #   description: Solar azimuth
  #   symbol: 󱦥
  #   initial:
  
  adjust_for_atmospheric_refraction:
    type: bool
    title: Refraction
    description: Flag to apply atmospheric refraction for the calculation of the solar zenith angle
    symbol:
    initial: False

  adjusted_for_atmospheric_refraction:
    type: bool
    title: Unrefracted ⦧
    description: Adjustment of the solar zenith angle (from which the solar altitude derives) for atmospheric refraction effects 
    symbol: ⦧
    initial: True

  # Override Surface reflectivity fields that are `required` via the Template

  value_before_reflectivity:
    shortname: Direct inclined
    title: Direct ⇣ ∡ ☉
    description: Direct inclined irradiance before reflectivity
    symbol: ⇣ ∡ ☉

  reflectivity_factor:
    title: Direct Reflectivity ⋅⭜ ⇣∡
    description: Surface reflectivity factor for the direct inclined irradiance
    symbol: '⋅⭜ ⇣∡'

  reflected:
    title: Direct ⇣ -⭜
    description: Irradiance losses due to surface reflectivity as a function of the angle of incidence in absolute terms of the direct inclined irradiance component
    symbol: '⇣ -⭜'

  reflected_percentage:
    title: Direct Reflectivity ⭳-⭜ %
    description: Reflectivity losses due to the angle of incidence in % of the direct inclined irradiance
    symbol: '⭳-⭜ %'
