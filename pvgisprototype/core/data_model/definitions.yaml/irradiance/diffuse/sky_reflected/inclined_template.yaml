name: DiffuseSkyReflectedInclinedIrradianceTemplate
description: Templage for Diffuse Sky-Reflected Inclined Irradiance data models

require:
  - irradiance/template
  
  # Solar position attributes
  - sun/position/attributes/azimuth
  - sun/position/attributes/azimuth_origin
  - sun/position/attributes/azimuth_difference

  # Surface position attributes
  - surface/position/attributes/surface_position
  - sun/position/attributes/incidence
  - surface/position/attributes/shading

  # Irradiance attributes
  - irradiance/attribute/kb_ratio
  - irradiance/attribute/term_n
  - irradiance/attribute/reflected_due_to_angle_of_incidence
  - surface/properties/reflectivity


sections:

  name:
    description: Name of the Diffuse Sky-Reflected Inclined Irradiance data model
    initial: Diffuse Sky-Reflected Inclined Irradiance Data

  shortname:
    description: Short name of the diffuse sky-reflected inclined irradiance data model
    initial: Sky-Diffuse

  supertitle:
    description: Supertitle for the sky-diffuse inclined irradiance data model. This may be usfeul in the context of plots.
    initial: Diffuse Horizontal Irradiance Series

  title:
    description: Title of the diffuse sky-reflected inclined irradiance data model
    initial: Sky-Diffuse Inclined

  label:
    description: Label for the sky-diffuse inclined irradiance data model. This may be useful in the context of a plot.
    initial: ğŸ—¤ âˆ¡ Sky-Diffuse Inclined Irradiance

  description:
    description: Description of the sky-reflected inclined irradiance data model
    initial: Diffuse sky-reflected inclined irradiance is a solar power component received per unit area at a given moment, expressed in watts per square meter (W/mÂ²). The values concern a specific location and a moment or period in time.

  symbol:
    description: Symbol of the diffuse sky-reflected inclined irradiance data model
    initial: ğŸ—¤âˆ¡

  value:
    description: Diffuse sky-reflected inclined irradiance values in form of a NumPy NDArray
    dependencies: direct_horizontal_irradiance, diffuse_horizontal_irradiance

  unit:
    description: Unit of the diffuse sky-reflected inclined irradiance values

  algorithm:
    description: Description of the calculation from external data
    initial: "1. for sunlit surfaces and non-overcast sky: a) if solar_altitude >= 5.7Â° then : Diffuse inclined = Diffuse horizontal * {Diffuse sky irradiance(ground view fraction) * (1 - Kb) + Kb * sin(solar_incidence) / sin(solar_altitude)}, b) if solar_altitude < 5.7Â° then : Diffuse inclined = Diffuse horizontal * {Diffuse sky irradiance(ground view fraction) * (1 - Kb) + Kb sin (ground-view fraction) * cos ALN/(0.1 - 0.008 * solar_altitude)}. 2) for surfaces in shadow (solar_incidence < 0 and solar_altitude >= 0) : Diffuse inclined = Diffuse horizontal * Diffuse sky irradiance(ground-view fraction)."

  equation:
    description: Equation to calculate the sky-diffuse inclined irradiance from external global and direct horizontal irradiance data
    initial: Diffuse ğŸ—¤ âˆ¡ = Diffuse ğŸ—¤ â­³ * F{Diffuse sky irradiance, ground-view fraction, Kb, solar_incidence, solar_altitude, ...}

  extraterrestrial_horizontal_irradiance:
    type: ExtraterrestrialHorizontalIrradiance
    title: Extra â– â­³
    description: Name of the Extraterrestrial Horizontal Irradiance data model
    symbol: â– â­³
    initial:

  extraterrestrial_normal_irradiance:
    type: ExtraterrestrialNormalIrradiance
    title: Extra â– â¦œ
    description: Name of the Extraterrestrial Normal Irradiance data model
    symbol: â– â¦œ
    initial:

  direct_horizontal_irradiance:
    type: DirectHorizontalIrradiance
    title: Direct â‡£ â­³
    description: Direct horizontal irradiance values
    symbol: â‡£ â­³
    initial:
    unit: W/mÂ²

  value_before_reflectivity:
    shortname: Sky-Diffuse ğŸ—¤âˆ¡
    title: Sky-Diffuse ğŸ—¤âˆ¡ â˜‰
    description: Diffuse sky-reflected inclined irradiance before reflectivity
    symbol: ğŸ—¤âˆ¡ â˜‰

  reflectivity_factor:
    description: The reflectivity factor for the diffuse sky-reflected inclined irradiance is an incidence angle modifier.
    dependencies: reflectivity_coefficient, solar_incidence

  reflected:
    description: Losses due to angle of incidence in absolute terms of the diffuse sky-reflected inclined irradiance

  reflected_percentage:
    description: Losses due to angle of incidence in % of diffuse sky-reflected inclined irradiance

  diffuse_sky_irradiance:
    type: array
    title: Sky-Diffuse ğŸ—¤ â˜‰
    description: Based on a function accounting for the diffuse sky irradiance 
    symbol: ğŸ—¤ â˜‰
    initial:

  global_horizontal_irradiance:
    type: array
    title: Global â¤‹ â­³
    description: Global horizontal irradiance
    symbol: â¤‹ â­³ 
    initial:
