name: DiffuseClearSkyReflectedHorizontalIrradiance
description: Diffuse Clear-Sky-Reflected Irradiance

imports:
  - irradiance/template
  - fields/location
  - fields/linke_turbidity_factor

fields:

  name:
    description: Name of the Clear-Sky-Reflected Diffuse Horizontal Irradiance data model
    initial: Clear-Sky-Reflected Diffuse Horizontal Irradiance Data

  shortname:
    description: Short name of the Diffuse Clear-Sky-Reflected Horizontal Irradiance data model
    initial: Sky-Diffuse Horizontal

  supertitle:
    initial: Sky-Diffuse Horizontal Irradiance

  title:
    description: Title of the diffuse clear-sky-reflected horizontal irradiance data model
    initial: Sky-Diffuse Horizontal

  label:
    description: Label for the sky-diffuse horizontal irradiance data model. This may be useful in the context of a plot.
    initial: ðŸ—¤ â­³ Simulated Sky-Diffuse Horizontal Irradiance
  
  description:
    initial: Diffuse clear-sky-reflected horizontal irradiance is a solar power component received per unit area at a given moment, expressed in watts per square meter (W/mÂ²). The values concern a specific location and a moment or period in time.

  symbol:
    description: Symbol of the diffuse clear-sky-reflected horizontal irradiance data model
    initial: ðŸ—¤â­³

  value:
    description: Diffuse clear-sky-reflected irradiance values in form of a NumPy NDArray
    initial:

  unit:
    description: Unit of the diffuse clear-sky-reflected horizontal irradiance values
    initial: W/m^2

  location:
    # type: Tuple[Longitude, Latitude, Elevation]
    type: Tuple[Longitude, Latitude]
    title: Location
    # description: Geographic coordinates (latitude, longitude, elevation) of the solar surface
    description: Geographic coordinates (latitude, longitude) of the solar surface
    initial:

  surface_tilt_threshold:
    type: float
    initial: 0.0001

  solar_positioning_algorithm:
    type: str
    title: Positioning â¯
    description: Solar positionin algorithm
    symbol: â¯
    initial:

  solar_timing_algorithm:
    type: str
    title: Timing â²
    description: Solar timing algorithm
    symbol: â²
    initial:

  solar_incidence_model:
    type: str
    title: Incidence â¯
    description: Solar incidence algorithm
    symbol: â¯
    initial:

  solar_incidence_definition:
    type: str
    title: Incidence definition â¯
    description: Solar incidence definition
    symbol: â¯
    initial:

  solar_incidence:
    type: SolarIncidence
    title: Incidence â¦©
    description: Solar incidence
    symbol: â¦©
    initial:

  solar_altitude:
    type: SolarAltitude
    title: Altitude â¦©
    description: Solar altitude
    symbol: â¦©
    initial:

  solar_azimuth:
    type: SolarAzimuth
    title: Azimuth â¦©
    description: Solar azimuth
    symbol: â¦©
    initial:

  azimuth_difference:
    type: ndarray
    title: Azimuth difference
    description: Solar azimuth difference
    symbol:
    initial:

  extraterrestrial_normal_irradiance:
    type: ExtraterrestrialNormalIrradiance
    title: Extra Normal â¦œ
    description: Name of the Extraterrestrial Normal Irradiance data model
    symbol: â¦œ
    initial:

  # refracted_solar_altitude:
  #   type: ndarray
  #   title: Refracted alt.
  #   description: Refracted solar altitude
  #   symbol: â¦©
  #   initial: null

  adjust_for_atmospheric_refraction:
    type: bool
    title: Refraction
    description: Flag to apply atmospheric refraction for the calculation of the solar zenith angle
    symbol:
    initial: False

  direct_horizontal_irradiance:
    type: DirectHorizontalIrradiance
    title: Direct Horizontal â‡£ â­³
    description: Direct horizontal irradiance values
    symbol: â‡£ â­³
    initial:
    unit: W/mÂ²

  angle_output_units:
    type: str
    title: Angle Unit
    description: Angle output units
    initial:

  data_source:
    description: Source of the diffuse clear-sky-reflected horizontal irradiance data
    initial: PVGIS

  presentation:
    type: dict
    initial: {}
    structure:

      - section: Diffuse Clear-Sky-Reflected Horizontal Irradiance
        description: Core section
        fields:
          - name
          - title
          - description
          - symbol
          - value
          - unit

      - section: Metadata
        description: Metadata section
        condition: verbose > 2
        fields:
          - solar_radiation_model
      
      - section: Context
        description: Contextual section
        condition: verbose > 1
        subsections:

          - subsection: Solar Parameters
            description: Solar Parameters subsection
            fields:
              - solar_constant
          
          - subsection: Earth Orbit
            description: Earth Orbit subsection
            fields:
              - eccentricity_phase_offset
              - eccentricity_amplitude

          - subsection: Solar Position
            description: Solar position parameters
            condition: verbose
            fields:
              - solar_altitude
              - solar_timing_algorithm
              - solar_positioning_algorithm

          - subsection: Surface Position
            description: Surface position parameters
            condition: verbose
            fields:
              - angle_output_units

          - subsection: Atmospheric Properties
            description: Atmospheric Properties
            condition: verbose > 2
            fields:
              - linke_turbidity_factor
              # - refracted_solar_altitude
              - adjust_for_atmospheric_refraction
      
          - subsection: Irradiance Metadata
            description: Irradiance components
            condition: verbose > 2
            fields:
              - extraterrestrial_normal_irradiance
              # - linke_turbidity_factor

      - section: Out-of-range
        description: Out-of-range values
        condition: self.out_of_range.size > 0
        fields:
          - out_of_range
          - out_of_range_index
