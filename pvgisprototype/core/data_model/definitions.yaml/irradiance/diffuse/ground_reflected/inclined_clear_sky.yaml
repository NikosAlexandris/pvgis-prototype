name: GroundReflectedIrradiance
description:

require:
  - irradiance/template

  - surface/position/attributes/location  # = Coordinates + Elevation
  - surface/position/attributes/surface_position

  # Algorithms
  - sun/position/attributes/positioning
  - sun/time/attribute/timing

  # Irradiance
  - irradiance/attribute/ground_view_fraction
  - surface/properties/albedo

  # Options
  - options/angle_output_unit
  
  # Structured output
  - irradiance/diffuse/ground_reflected/inclined_clear_sky_output

sections:

  name:
    description: Name of the Ground-Reflected Irradiance data model
    initial: Ground-Reflected Irradiance Data

  shortname:
    description: Short name of the Ground-Reflected Irradiance data model
    initial: Ground-Reflected

  supertitle:
    description: Supertitle for the ground-diffuse inclined irradiance data model. This may be usfeul in the context of plots.
    initial: Ground-Diffuse Inclined Irradiance

  title:
    description: Title of the data model
    initial: Ground-Diffuse Inclined Irradiance

  label:
    description: Label for the ground-diffuse inclined irradiance data model. This may be useful in the context of a plot.
    initial: ⭞ ∡ Ground-Diffuse Inclined Irradiance

  description:
    description: Description of the data model
    initial: Clear-sky ground-reflected irradiance time series

  symbol:
    description: Symbol for the diffuse ground-reflected irradiance data model
    initial: ⭞

  location:
    type: Tuple[Longitude, Latitude]
    description: Geographic coordinates (latitude, longitude) of the PV installation.
    initial:

  timestamps:
    type: DatetimeIndex
    title: Timestamps
    description: Timestamps of the data
    initial:

  value:
    dependencies: global_horizontal_irradiance, ground_view_fraction, albedo
    description: Values in form of a NumPy NDArray

  unit:
    description: Unit of the clear-sky ground-reflected inclined irradiance values

    algorithm:
      initial: The diffuse ground-reflected irradiance [⭞] on an inclined surface is simulated as a fraction of the global horizontal [⭳] irradiance modulated by the ground-view fraction and the albedo [⌰] of the terrain surrounding the surface. If the global horizontal irradiance is not retrieved from external data, it is simulated internally by estimating the direct and diffuse sky-reflected irradiance components. 

    equation:
      description: Equation to calculate the clear-sky diffuse ground-reflected inclined irradiance.
      initial: Ground-reflected inclined ∡ = Global horizontal ⤋ ⭳ * Ground view fraction * Albedo ⌰

  global_horizontal_irradiance:
    type: array
    title: Global Irradiance ⭳
    description: Global horizontal irradiance values
    initial:
    unit: W/m²

  direct_horizontal_irradiance:
    type: DirectHorizontalIrradiance
    title: Direct Irradiance ⭳
    description: Direct horizontal irradiance values
    initial:
    unit: W/m²

  diffuse_horizontal_irradiance:
    type: DiffuseSkyReflectedHorizontalIrradiance
    title: Diffuse Irradiance ⭳
    description: Diffuse horizontal irradiance values
    initial:
    unit: W/m²

  data_source:
    description: Source of the clear-sky diffuse ground-reflected inclined irradiance data
    initial: 
