name: PhotovoltaicPowerFromExternalData
description: Photovoltaic Power from external data

require:
  - power/template
  - power/attribute/power_without_system_loss

  - power/attribute/power_model
  - power/attribute/peak_power

  - performance/attributes/technology
  - performance/attributes/photovoltaic_module_type

  - performance/attributes/system_efficiency
  - performance/attributes/efficiency_factor
  - performance/attributes/system_loss

  # Irradiance components

  # Effective
  - irradiance/attribute/effective/global
  - irradiance/attribute/effective/direct
  - irradiance/attribute/effective/sky_diffuse
  - irradiance/attribute/effective/ground_diffuse

  # Spectral effect
  - performance/attributes/spectral_effect
  - performance/attributes/spectral_effect_percentage
  - performance/attributes/spectral_factor
  - performance/attributes/spectral_factor_algorithm

  # Inclined [after reflectivity losses]
  - irradiance/attribute/inclined/global
  - irradiance/attribute/inclined/direct
  - irradiance/attribute/inclined/sky_diffuse
  - irradiance/attribute/inclined/ground_diffuse
 
  # Reflectivity
  - irradiance/attribute/reflectivity/global
  - irradiance/attribute/reflectivity/direct
  - irradiance/attribute/reflectivity/sky_diffuse
  - irradiance/attribute/reflectivity/ground_diffuse
 
  # Reflectivity percentage
  - irradiance/attribute/reflectivity/percentage/global
  - irradiance/attribute/reflectivity/percentage/direct
  - irradiance/attribute/reflectivity/percentage/sky_diffuse
  - irradiance/attribute/reflectivity/percentage/ground_diffuse

  # Reflectivity factor
  - irradiance/attribute/reflectivity/factor/direct
  - irradiance/attribute/reflectivity/factor/sky_diffuse
  - irradiance/attribute/reflectivity/coefficient/sky_diffuse
  - irradiance/attribute/reflectivity/factor/ground_diffuse

  # Before reflectivity losses
  - irradiance/attribute/inclined/before_reflectivity/global
  - irradiance/attribute/inclined/before_reflectivity/direct
  - irradiance/attribute/inclined/before_reflectivity/sky_diffuse
  - irradiance/attribute/inclined/before_reflectivity/ground_diffuse

  # Horizontal
  - irradiance/attribute/horizontal/direct_from_external_data
  - irradiance/attribute/horizontal/diffuse_from_external_data

  # Extraterrestrial
  - irradiance/attribute/extraterrestrial/horizontal
  - irradiance/attribute/extraterrestrial/normal

  - surface/position/attributes/location
  - surface/position/attributes/sun_horizon_positioning
  - surface/position/attributes/surface_position
  - surface/position/options/optimiser
  - surface/position/attributes/optimal

  - irradiance/attribute/solar_constant
  - earth/attribute/orbit

  - sun/position/attributes/positioning
  - sun/time/attribute/timing
  - atmosphere/attribute/linke_turbidity_factor

  - sun/position/attributes/adjusted_for_atmospheric_refraction
  - sun/position/attributes/altitude
  - sun/position/attributes/azimuth
  - sun/position/attributes/azimuth_origin
  - sun/position/attributes/incidence
  - surface/position/attributes/shading

  - meteorology/attribute/temperature
  - meteorology/attribute/wind_speed

  - performance/attributes/spectral_factor
  - performance/attributes/spectral_factor_algorithm
  - performance/attributes/spectral_effect
  - performance/attributes/spectral_effect_percentage

  - metadata/solar_radiation_model
  - metadata/quality
  - metadata/references
  - metadata/fingerprint

  # Options
  - options/angle_output_unit
  - power/output/from_external_data

sections:

  # Standard attributes

  name:
    description: Name of the photovoltaic power data model (based on external data)
    initial: Photovoltaic Power data model (based on external data)

  shortname:
    description: Photovoltaic power data model (based on external data)

  supertitle:
    initial: Photovoltaic Power

  title:
    initial: Power

  label:
    initial: ⌁ Photovoltaic Power

  description:
    description: Description for the Photovoltaic Power data model (based on external data)

  symbol:
    description: Symbol for the photovoltaic power (based on external data)

  value:
    description: Photovoltaic Power (based on external data)

  equation:
    description: Equation for the photovoltaic power (based on external data)

  # Data model specific attributes
 
  photovoltaic_power_without_system_loss:
    desription: Power without loss (based on external data)

  effective_global_irradiance:
    description: Effective global irradiance (based on external data) = Effective(Direct + Sky-Diffuse + Ground-Diffuse)

  effective_direct_irradiance:
    description: Effective direct inclined irradiance (based on external data) = Direct inclined irradiance (based on external data) * efficiency_factor

  effective_diffuse_irradiance:
    description: Effective diffuse sky-reflected inclined irradiance (based on external data) = Diffuse sky-reflected inclined irradiance (based on external data) * efficiency_factor

  effective_ground_reflected_irradiance:
    description: Effective diffuse ground-reflected inclined irradiance (based on external data) = Diffuse ground-reflected inclined irradiance (based on external data) * efficiency_factor

  global_inclined_irradiance:
    description: (Shortwave) Global inclined irradiance values (based on external data)

  direct_inclined_irradiance:
    description: Direct inclined irradiance (based on external data)

  diffuse_inclined_irradiance:
    description: Diffuse sky-reflected inclined irradiance (based on external data)

  ground_reflected_inclined_irradiance:
    description: Diffuse ground-reflected inclined irradiance (based on external data)

  global_inclined_before_reflectivity:
    description: Global inclined irradiance (based on external data) before reflectivity

  direct_inclined_before_reflectivity:
    description: Direct inclined irradiance (based on external data) before reflectivity

  diffuse_inclined_before_reflectivity:
    description: Diffuse sky-reflected inclined irradiance (based on external data) before reflectivity

  ground_reflected_inclined_before_reflectivity:
    description: Diffuse ground-reflected inclined irradiance (based on external data) before reflectivity

  direct_inclined_reflectivity_factor:
    description: Reflectivity factor for the direct inclined irradiance (based on external data)

  diffuse_inclined_reflectivity_coefficient:
    description: Reflectivity coefficient for the diffuse sky-reflected inclined irradiance (based on external data)

  diffuse_inclined_reflectivity_factor:
    description: Reflectivity factor for the diffuse sky-reflected inclined irradiance (based on external data)

  ground_reflected_inclined_reflectivity_factor:
    description: Reflectivity factor for the diffuse ground-reflected inclined irradiance (based on external data)

  global_inclined_reflectivity:
    description: Sum of the reflectivity losses due to the angle of solar incidence in absolute terms of the direct inclined, the diffuse sky-reflected inclined and the diffuse ground-reflected irradiance (based on external data)

  direct_inclined_reflectivity:
    description: Reflectivity losses due to angle of incidence in absolute terms of the direct inclined irradiance (based on external data)

  diffuse_inclined_reflectivity:
    description: Reflectivity losses due to angle of incidence in absolute terms of the diffuse sky-reflected inclined irradiance (based on external data)

  ground_reflected_inclined_reflectivity:
    description: Reflectivity losses due to angle of incidence in absolute terms of the diffuse ground-reflected inclined irradiance (based on external data)

  reflectivity_percentage:
    description: Total reflectivity losses due to the angle of incidence in % the of global inclined irradiance (based on external data)

  direct_inclined_reflectivity_percentage:
    description: Reflectivity losses due to the angle of incidence in % of the direct inclined irradiance (based on external data)

  diffuse_inclined_reflectivity_percentage:
    description: Reflectivity losses due to the angle of incidence in % of the diffuse sky-reflected inclined irradiance (based on external data)

  ground_reflected_inclined_reflectivity_percentage:
    description: Reflectivity losses due to the angle of incidence in % of the diffuse ground-reflected inclined irradiance (based on external data)

  references:
    description: References for the photovoltaic power (based on external data)
    initial: "D.L. King, J.A. Kratochvil, W.E. Boyson, W.I. Bower, Field experience with a new performance characterization procedure for photovoltaic arrays, in: Proceedings of the second World Conference and Exhibition on Photovoltaic Solar Energy Conversion, Vienna, 1998, pp. 1947–1952.. D.L. King, W.E. Boyson, J.A. Kratochvil, Photovoltaic Array Performance Model, SAND2004-3535, Sandia National Laboratories, 2004."
