name: PhotovoltaicModuleEfficiencyFactorOutput
desription: Output structure for the PhotovoltaicModuleEfficiencyFactor data model

imports:
  - output/template

fields:

  presentation:
    structure:

      - section: Photovoltaic Module Efficiency Factor
        description: Core section
        fields:
          - name
          - title
          - description
          - symbol
          - value  # efficiency_series
          - unit
          - equation

      - section: Metadata
        description: Metadata section
        condition: verbose > 2
        fields:
          # - technology
          - photovoltaic_module_type
          - photovoltaic_module_efficiency_coefficients
          - power_model
          - temperature_model # TEMPERATURE_ALGORITHM_COLUMN_NAME
          - temperature_deviation
          - temperature_adjusted_series
          - efficiency_coefficients
          - solar_radiation_model
      
          # DIRECT_CURRENT_COLUMN_NAME: current_series if (verbose > 1 and power_model.value == PhotovoltaicModulePerformanceModel.iv) else NOT_AVAILABLE, # FIXME UNBOUND current_series
          # VOLTAGE_COLUMN_NAME: voltage_series if (verbose > 1 and power_model.value == PhotovoltaicModulePerformanceModel.iv) else NOT_AVAILABLE, # FIXME UNBOUND current_series
          # TEMPERATURE_DEVIATION_COLUMN_NAME: efficiency_series.components[
          #     TEMPERATURE_DEVIATION_COLUMN_NAME
      - section: Context
        description: Contextual section
        condition: verbose > 1
        subsections:

          - subsection: System Loss
            description: System loss
            condition: verbose > 2
            fields:
              - system_efficiency
              - efficiency_factor
              - radiation_cutoff_threshold
              - radiation_cutoff_loss_percentage

          - subsection: Inclined Irradiance
            description: Inclined irradiance components
            condition: verbose > 4
            fields:
              - global_inclined_irradiance  # without considering the spectral effect !

          - subsection: Effective irradiance components
            description: Spectral effect
            condition: verbose > 3
            fields:
              - effective_global_irradiance
              - spectral_effect
              - spectral_effect_percentage
              - spectral_factor
              - log_relative_irradiance
              - relative_irradiance
              - low_irradiance

          - subsection: Effective inclined irradiance
            description: Effective & inclined irradiance components before reflectivity loss
            condition: verbose > 5 and self.global_inclined_before_reflectivity.any()
            fields:
              - global_inclined_before_reflectivity

          - subsection: Meteorological variables
            description:
            condition: verbose > 7
            fields:
              - temperature
              - wind_speed
